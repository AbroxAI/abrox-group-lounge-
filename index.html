<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Header Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>

<style>
/* ===== HEADER ===== */
.header {
  background:#232833;
  border-bottom:1px solid #343a4a;
}

/* ===== TYPING ROW (LOCKED — TELEGRAM SAFE) ===== */
.typing-row {
  display:flex;
  align-items:center;
  gap:8px;

  padding:0 16px;
  height:0;
  overflow:hidden;

  font-size:12px;
  font-weight:500;
  color:#6bdba7;

  opacity:0;
  transition:
    height .18s ease,
    opacity .12s ease;
}

.typing-row.active {
  height:22px;
  opacity:1;
}

/* ===== TYPING DOTS ===== */
.typing-dots {
  display:flex;
  gap:3px;
}
.typing-dots span {
  width:4px;
  height:4px;
  border-radius:999px;
  background:#6bdba7;
  opacity:.25;
  animation:dotPulse 1.2s infinite ease-in-out;
}
.typing-dots span:nth-child(2){animation-delay:.15s}
.typing-dots span:nth-child(3){animation-delay:.3s}

@keyframes dotPulse {
  0%,80%,100%{opacity:.25}
  40%{opacity:1}
}
</style>
</head>

<body class="bg-[#1c1f26] text-white">

<header class="header">
  <!-- TOP ROW -->
  <div class="flex items-center justify-between px-4 py-3">
    <div class="flex gap-3 items-center">
      <div class="w-8 h-8 rounded bg-[#6bdba7]"></div>

      <div>
        <div class="text-sm font-semibold leading-tight">
          Abrox Binary Bot – Private Lounge
        </div>
        <div class="flex items-center gap-1 text-xs text-gray-400">
          <i data-lucide="lock" class="w-3 h-3"></i>
          <span>Private Group</span>
        </div>
      </div>
    </div>

    <button>
      <i data-lucide="users"></i>
    </button>
  </div>

  <!-- MEMBERS LINE -->
  <div class="px-4 text-xs text-gray-400">
    Members: 4,872 • Online: 132
  </div>

  <!-- DISCUSSION LINE -->
  <div class="px-4 text-xs text-gray-500 pb-1">
    Demo discussion · Verification required
  </div>

  <!-- TYPING LINE (LOCKED IN FLOW) -->
  <div id="typingRow" class="typing-row">
    <div class="typing-dots">
      <span></span><span></span><span></span>
    </div>
    <span id="typingText">Typing…</span>
  </div>
</header>

<div class="p-4">
  <input id="input"
         class="w-full bg-[#232833] border border-[#343a4a] rounded px-3 py-2 text-sm"
         placeholder="Type to test typing position">
</div>

<script>
lucide.createIcons();

const typingRow = document.getElementById('typingRow');
const typingText = document.getElementById('typingText');
const input = document.getElementById('input');

let activeTypers = new Set();
let selfTimer;

/* Update typing text safely */
function updateTyping() {
  const names = [...activeTypers].slice(0,2);

  if (!names.length) {
    typingRow.classList.remove('active');
    return;
  }

  typingText.textContent =
    names.length === 1
      ? `${names[0]} is typing…`
      : `${names.join(', ')} are typing…`;

  typingRow.classList.add('active');
}

/* Self typing */
input.addEventListener('input', () => {
  activeTypers.add('You');
  updateTyping();

  clearTimeout(selfTimer);
  selfTimer = setTimeout(() => {
    activeTypers.delete('You');
    updateTyping();
  }, 2200); // realistic linger
});

/* Simulated remote member (for realism test) */
setInterval(() => {
  activeTypers.add('Member_11');
  updateTyping();

  setTimeout(() => {
    activeTypers.delete('Member_11');
    updateTyping();
  }, 2600);
}, 7000);
</script>

</body>
</html>
