<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Abrox â€“ Private Lounge</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">
<meta name="theme-color" content="#1c1f26">

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<script src="emoji-pack.js" defer></script>

<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        bg:'#1c1f26',
        panel:'#232833',
        border:'#343a4a',
        muted:'#a0a6b5',
        accent:'#2ecc71',
        bubble:'#262b38'
      }
    }
  }
}
</script>

<style>
.msg{display:flex;gap:8px;align-items:flex-end}
.msg.out{justify-content:flex-end}
.msg .bubble{
  background:#262b38;
  padding:10px 12px;
  font-size:13px;
  border-radius:14px 14px 14px 4px;
  max-width:78%;
  position:relative;
}
.msg.out .bubble{border-radius:14px 14px 4px 14px}
.sender{font-size:11px;color:#2ecc71;margin-bottom:2px}
.time{font-size:10px;color:#a0a6b5;margin-top:4px;text-align:right}
.wave span{display:inline-block;width:3px;background:#2ecc71;margin-right:2px;border-radius:2px}
.typing{font-size:11px;color:#a0a6b5;padding:6px}
.reactions{font-size:14px;margin-top:4px}

.date-sep{
  text-align:center;
  font-size:11px;
  color:#a0a6b5;
  margin:10px 0;
}

#newMsgBtn{
  position:absolute;
  bottom:90px;
  left:50%;
  transform:translateX(-50%);
  background:#2ecc71;
  color:#000;
  font-size:11px;
  padding:6px 12px;
  border-radius:9999px;
  display:none;
  cursor:pointer;
}
</style>
</head>

<body class="bg-bg text-white h-[100dvh] overflow-hidden">

<div class="flex h-full relative">

<main class="flex flex-col flex-1 border-r border-border">

<header class="bg-panel border-b border-border px-4 py-3">
  <div class="flex justify-between items-start">
    <div class="flex gap-4">
      <img src="assets/logo.png" class="w-10 h-10 object-contain"/>
      <div>
        <div class="text-sm font-semibold">Abrox Binary Bot â€“ Private Lounge</div>
        <div class="text-xs text-muted flex items-center gap-1">
          <i data-lucide="lock" class="w-3.5 h-3.5"></i> Private Group
        </div>
        <div class="text-xs text-muted">
          Members: 4,872 â€¢ Online: <span id="onlineCount">132</span>
        </div>
        <div class="text-[11px] text-muted/80">
          Demo discussion Â· Verification required
        </div>
      </div>
    </div>

    <button id="membersBtn">
      <i data-lucide="users" class="w-5 h-5 text-muted"></i>
    </button>
  </div>
</header>

<section id="chat" class="flex-1 overflow-y-auto px-4 py-4 space-y-4 relative">
  <div class="system text-center text-muted text-sm">
    ðŸ“Œ <strong>Group Rules</strong><br>
    New members are read-only until verified<br>
    Admins DM individually<br>
    No screenshots in chat<br>
    Ignore unsolicited messages
  </div>
</section>

<div id="newMsgBtn">New messages â†“</div>
<div id="typing" class="typing hidden">Someone is typingâ€¦</div>

<footer class="bg-panel border-t border-border px-4 py-3 pb-[env(safe-area-inset-bottom)]">
  <div class="flex items-center gap-3 bg-bg rounded-full px-4 py-2">
    <input id="input" class="flex-1 bg-transparent outline-none text-sm" placeholder="Message">
    <button id="send" class="hidden">Send</button>
  </div>
</footer>

</main>

<!-- SIDEBAR -->
<aside id="sidebar"
class="fixed top-0 right-0 h-full w-72 bg-panel border-l border-border p-4
translate-x-full transition-transform duration-300 ease-in-out z-50">
  <div class="flex justify-between items-center mb-4">
    <span class="text-sm font-semibold">Members</span>
    <button onclick="toggleSidebar()">âœ•</button>
  </div>
</aside>

</div>

<script>
lucide.createIcons();

let online=132;
setInterval(()=>{online+=Math.random()>.5?1:-1;onlineCount.textContent=online},8000);

const chat=document.getElementById('chat');
const input=document.getElementById('input');
const send=document.getElementById('send');
const newMsgBtn=document.getElementById('newMsgBtn');
const sidebar=document.getElementById('sidebar');
const membersBtn=document.getElementById('membersBtn');

let lastDate=null;
let userAtBottom=true;

function isAtBottom(){
  return chat.scrollHeight - chat.scrollTop - chat.clientHeight < 50;
}

chat.addEventListener('scroll',()=>{
  userAtBottom=isAtBottom();
  newMsgBtn.style.display=userAtBottom?'none':'block';
});

newMsgBtn.onclick=()=>{
  chat.scrollTo({top:chat.scrollHeight,behavior:'smooth'});
};

function toggleSidebar(){
  sidebar.classList.toggle('translate-x-full');
}
membersBtn.onclick=toggleSidebar;

function appendDateIfNeeded(date){
  if(date!==lastDate){
    const d=document.createElement('div');
    d.className='date-sep';
    d.textContent=new Date(date).toDateString();
    chat.appendChild(d);
    lastDate=date;
  }
}

function appendMessage({text,sender,outgoing=false}){
  const now=new Date();
  appendDateIfNeeded(now.toDateString());

  const t=now.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
  const m=document.createElement('div');
  m.className='msg'+(outgoing?' out':'');
  m.innerHTML=`
    <div class="bubble">
      ${!outgoing?`<div class="sender">${sender}</div>`:''}
      ${text}
      <div class="time">âœ“ ${t}</div>
    </div>`;
  chat.appendChild(m);

  if(userAtBottom){
    m.scrollIntoView({behavior:'smooth'});
  }

  setTimeout(()=>m.querySelector('.time').innerHTML='âœ“âœ“ '+t,700);
  setTimeout(()=>m.querySelector('.time').innerHTML='âœ“âœ“ ðŸ‘€ '+t,2000);
}

send.onclick=()=>{
  if(!input.value.trim())return;
  appendMessage({text:input.value,sender:'You',outgoing:true});
  input.value='';
};

let startX=0;
document.addEventListener('touchstart',e=>startX=e.touches[0].clientX);
document.addEventListener('touchend',e=>{
  const diff=e.changedTouches[0].clientX-startX;
  if(diff>80)sidebar.classList.remove('translate-x-full');
  if(diff<-80)sidebar.classList.add('translate-x-full');
});
</script>

</body>
</html>
