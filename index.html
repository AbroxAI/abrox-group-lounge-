<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Abrox – Private Lounge</title>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>

<style>
*{box-sizing:border-box}

/* ================= HEADER ================= */
.header{
  background:#232833;
  border-bottom:1px solid #343a4a;
}

/* ===== TYPING ROW (LOCKED — TELEGRAM SAFE) ===== */
.typing-row{
  display:flex;
  align-items:center;
  gap:8px;
  padding:0 16px;
  height:0;
  overflow:hidden;
  font-size:12px;
  font-weight:500;
  color:#6bdba7;
  opacity:0;
  transition:height .18s ease, opacity .12s ease;
}
.typing-row.active{
  height:22px;
  opacity:1;
}

/* typing dots */
.typing-dots{display:flex;gap:3px}
.typing-dots span{
  width:4px;
  height:4px;
  border-radius:999px;
  background:#6bdba7;
  opacity:.25;
  animation:dotPulse 1.2s infinite ease-in-out;
}
.typing-dots span:nth-child(2){animation-delay:.15s}
.typing-dots span:nth-child(3){animation-delay:.3s}
@keyframes dotPulse{
  0%,80%,100%{opacity:.25}
  40%{opacity:1}
}

/* ================= CHAT ================= */
.msg{
  display:flex;
  gap:8px;
  margin-bottom:8px;
  align-items:flex-end;
}
.msg.out{justify-content:flex-end}
.grouped{margin-top:-6px}

/* avatars */
.avatar{
  width:36px;
  height:36px;
  border-radius:999px;
}

/* hide avatar on grouped messages */
.msg.grouped .avatar{
  visibility:hidden;
}

/* bubbles */
.bubble{
  max-width:78%;
  padding:9px 15px 8px;
  font-size:14px;
  line-height:1.45;
  position:relative;
  box-shadow:0 2px 8px rgba(0,0,0,.18);
}

/* incoming */
.msg.in .bubble{
  background:#262b38;
  border-radius:8px 18px 18px 8px;
}
.msg.in .bubble::before{
  content:'';
  position:absolute;
  left:-6px;
  bottom:14px;
  width:10px;
  height:10px;
  background:#262b38;
  transform:rotate(45deg);
  border-radius:2px;
}

/* outgoing */
.msg.out .bubble{
  background:#2b3242;
  border:1px solid #343a4a;
  border-radius:18px 8px 8px 18px;
}
.msg.out .bubble::after{
  content:'';
  position:absolute;
  right:-6px;
  bottom:14px;
  width:10px;
  height:10px;
  background:#2b3242;
  transform:rotate(45deg);
  border-radius:2px;
}

/* grouped hides tails */
.grouped.in .bubble::before,
.grouped.out .bubble::after{
  display:none;
}

/* meta */
.sender{
  font-size:12px;
  font-weight:600;
  color:#6bdba7;
  margin-bottom:4px;
}
.time{
  font-size:10px;
  opacity:.6;
  margin-top:6px;
  text-align:right;
}

/* scroll */
section{-webkit-overflow-scrolling:touch}
</style>
</head>

<body class="bg-[#1c1f26] text-white h-[100dvh] overflow-hidden">
<main class="flex flex-col h-full">

<header class="header">
  <!-- TOP ROW -->
  <div class="flex items-center justify-between px-4 py-3">
    <div class="flex gap-3 items-center">
      <div class="w-9 h-9 rounded bg-[#6bdba7]"></div>
      <div>
        <div class="text-sm font-semibold">Abrox Binary Bot – Private Lounge</div>
        <div class="flex items-center gap-1 text-xs text-gray-400">
          <i data-lucide="lock" class="w-3 h-3"></i>
          <span>Private Group</span>
        </div>
      </div>
    </div>
    <button><i data-lucide="users"></i></button>
  </div>

  <!-- MEMBERS -->
  <div class="px-4 text-xs text-gray-400">
    Members: 4,872 • Online: 132
  </div>

  <!-- ✅ TYPING ROW (NOW BEFORE DISCUSSION) -->
  <div id="typingRow" class="typing-row">
    <div class="typing-dots"><span></span><span></span><span></span></div>
    <span id="typingText">Typing…</span>
  </div>

  <!-- DISCUSSION -->
  <div class="px-4 text-xs text-gray-500 pb-1">
    Demo discussion · Verification required
  </div>
</header>

<section class="flex-1 overflow-y-auto px-4 py-4">
  <div class="msg in">
    <img class="avatar" src="https://randomuser.me/api/portraits/men/32.jpg">
    <div class="bubble">
      <div class="sender">Profit Hunter</div>
      Please follow the rules.
      <div class="time">02:08 AM</div>
    </div>
  </div>

  <div class="msg in grouped">
    <img class="avatar" src="https://randomuser.me/api/portraits/men/32.jpg">
    <div class="bubble">
      Verified members can now chat.
      <div class="time">02:09 AM</div>
    </div>
  </div>
</section>

<footer class="bg-[#232833] border-t border-[#343a4a] px-4 py-3">
  <input id="input"
    class="w-full bg-[#1c1f26] border border-[#343a4a] rounded px-3 py-2 text-sm"
    placeholder="Message">
</footer>

</main>

<script>
lucide.createIcons();

const typingRow=document.getElementById('typingRow');
const typingText=document.getElementById('typingText');
const input=document.getElementById('input');

let activeTypers=new Set();
let selfTimer;

function updateTyping(){
  const names=[...activeTypers];
  if(!names.length){
    typingRow.classList.remove('active');
    return;
  }
  typingText.textContent =
    names.length===1
      ? `${names[0]} is typing…`
      : `${names.slice(0,2).join(', ')} are typing…`;
  typingRow.classList.add('active');
}

input.addEventListener('input',()=>{
  activeTypers.add('You');
  updateTyping();
  clearTimeout(selfTimer);
  selfTimer=setTimeout(()=>{
    activeTypers.delete('You');
    updateTyping();
  },2200);
});
</script>

</body>
</html>
